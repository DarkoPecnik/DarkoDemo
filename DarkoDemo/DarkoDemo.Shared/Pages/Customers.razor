@attribute [Route(Routes.Admin.Customers)]

@inject CoreApiClient CoreApi

<PageTitle>Customers</PageTitle>

<MudText Typo="Typo.h4" Class="mb-4">Customers</MudText>

<Loader ShowIfNull="customers" />

@if (customers is not null)
{
    <MudDataGrid Items="@customers" Outlined="true">
        <Columns>
            <TemplateColumn HeaderClass="d-none">
                <CellTemplate>
                    <MudLink Underline="Underline.None" Typo="Typo.body2" href="@Routes.Admin.GetCustomerRoute(context.Item.Id)">@context.Item.Name</MudLink>
                </CellTemplate>
            </TemplateColumn>
        </Columns>
    </MudDataGrid>
}

@code {
    private IEnumerable<CustomerRead>? customers;

    protected override async Task OnInitializedAsync()
    {
        customers = await CoreApi.ReadCustomers();
    }
}
